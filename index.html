<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />

  <!-- STRICT STORAGE BLOCKER & POLYFILL + ERROR SUPPRESSION -->
  <script>
    (function () {
      // Suppress all console output for storage/extension errors
      var suppressPatterns = [
        'access to storage',
        'storage is not allowed',
        'cookie',
        'cuponomia',
        'ext-cdn',
        'failed to read',
        'cors',
        'extension',
        'chrome-extension',
        'moz-extension',
        'net::err_failed',
        'features.json',
        'blocked by cors',
        'preflight',
        'access-control-allow',
        'minified react error',
        '#310',
        '#426',
        '#418',
        '#423',
        'invariant'
      ];

      function shouldSuppress(msg) {
        if (!msg) return false;
        var msgLower = String(msg).toLowerCase();
        for (var i = 0; i < suppressPatterns.length; i++) {
          if (msgLower.indexOf(suppressPatterns[i]) !== -1) return true;
        }
        return false;
      }

      // Intercept console.error to hide extension errors
      var originalError = console.error;
      console.error = function () {
        var args = Array.prototype.slice.call(arguments);
        var msgStr = args.map(function (a) { return String(a); }).join(' ');
        if (shouldSuppress(msgStr)) {
          return; // Silently suppress
        }
        originalError.apply(console, arguments);
      };

      // Intercept console.warn similarly
      var originalWarn = console.warn;
      console.warn = function () {
        var args = Array.prototype.slice.call(arguments);
        var msgStr = args.map(function (a) { return String(a); }).join(' ');
        if (shouldSuppress(msgStr)) {
          return; // Silently suppress
        }
        originalWarn.apply(console, arguments);
      };

      var memoryStore = {};
      var storageShim = {
        getItem: function (key) { return memoryStore[key] || null; },
        setItem: function (key, value) { memoryStore[key] = String(value); },
        removeItem: function (key) { delete memoryStore[key]; },
        clear: function () { memoryStore = {}; },
        key: function (n) { return Object.keys(memoryStore)[n]; },
        get length() { return Object.keys(memoryStore).length; }
      };

      try {
        // 1. Kill LocalStorage
        Object.defineProperty(window, 'localStorage', { value: storageShim, writable: false, configurable: false });

        // 2. Kill SessionStorage
        Object.defineProperty(window, 'sessionStorage', { value: storageShim, writable: false, configurable: false });

        // 3. Kill Cookies (JS access) - silently
        Object.defineProperty(document, 'cookie', {
          get: function () { return ''; },
          set: function () { /* Silent block */ },
          configurable: false
        });
      } catch (e) {
        // Intentionally silent
      }

      // Global Error Suppression for residual access attempts from browser/extensions
      window.addEventListener('error', function (e) {
        if (shouldSuppress(e.message) || shouldSuppress(e.filename)) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return true;
        }
      }, true);

      // Suppress unhandled promise rejections from storage errors
      window.addEventListener('unhandledrejection', function (e) {
        var reason = e.reason;
        var msg = reason && (reason.message || String(reason));
        if (shouldSuppress(msg)) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return true;
        }
      }, true);
    })();
  </script>

  <!-- Performance: Preconnect to external domains -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://mlqzeihukezlozooqhko.supabase.co" crossorigin>

  <!-- Security: Content Security Policy to restrict sources, allowing Vercel Live -->
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; frame-src 'self' https://vercel.live https://*.vercel.live; script-src 'self' 'unsafe-inline' https://vercel.live https://*.vercel.live; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob: https://picsum.photos https://fastly.picsum.photos https://assets.vercel.com https://vercel.live https://*.vercel.live https://vercel.com; connect-src 'self' https://mlqzeihukezlozooqhko.supabase.co wss://mlqzeihukezlozooqhko.supabase.co https://vercel.live https://*.vercel.live;">

  <title>Pé de Meia - Gestão Financeira Inteligente</title>

  <!-- Performance: Optimized font loading with display=swap to prevent FOIT -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"
    media="print" onload="this.media='all'">
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet">
  </noscript>

  <!-- Performance: Preload critical CSS -->
  <link rel="preload" href="/index.css" as="style">
  <link rel="stylesheet" href="/index.css">

  <!-- Performance: Prevent render blocking -->
  <style>
    /* Critical CSS - Inline for instant render */
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, sans-serif;
    }

    #root {
      min-height: 100vh;
    }

    .loader {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: #0f172a;
    }
  </style>
</head>

<body>
  <div id="root">
    <!-- Performance: Show instant loading state -->
    <div class="loader">
      <svg class="animate-spin h-10 w-10 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none"
        viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor"
          d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
        </path>
      </svg>
    </div>
  </div>
  <script type="module" src="/index.tsx"></script>
</body>

</html>